(this["webpackJsonpreact-resty"]=this["webpackJsonpreact-resty"]||[]).push([[0],{43:function(e,t,s){},44:function(e,t,s){},50:function(e,t,s){},52:function(e,t,s){},70:function(e,t,s){},71:function(e,t,s){},72:function(e,t,s){"use strict";s.r(t);var n=s(0),r=s(1),a=s.n(r),c=s(32),i=s.n(c),o=(s(43),s(4)),u=s(5),l=s(7),h=s(6),d=(s(44),s(13)),j=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"render",value:function(){return Object(n.jsxs)("header",{children:[Object(n.jsx)("h1",{children:"RESTy"}),Object(n.jsx)("nav",{children:Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(d.b,{to:"/",children:"Home"})}),Object(n.jsx)("li",{children:Object(n.jsx)(d.b,{to:"/history",children:"History"})}),Object(n.jsx)("li",{children:Object(n.jsx)(d.b,{to:"/help",children:"Help"})})]})})]})}}]),s}(a.a.Component),b=(s(50),function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"render",value:function(){return Object(n.jsx)("footer",{children:Object(n.jsx)("p",{children:" \xa9 2018 Code Fellows "})})}}]),s}(a.a.Component)),O=s(2),p=s(37),f=s(21),x=s.n(f),y=s(34),g=s(12),m=(s(52),s(35)),v=s.n(m),q=s(36),S=s.n(q),k=s(18),C=k.If,N=k.Then,H=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(o.a)(this,s),(r=t.call(this,e)).handleChangeUrl=function(e){var t=e.target.value;r.setState({request:Object(g.a)(Object(g.a)({},r.state.request),{},{url:t})})},r.handleChangeMethod=function(e){r.setState({request:Object(g.a)(Object(g.a)({},r.state.request),{},{method:e,data:""})}),"post"==e&&"put"==e||(document.getElementById("jsonBody").value=null)},r.handleChangeData=function(e){var t=e.target.value;r.setState({request:Object(g.a)(Object(g.a)({},r.state.request),{},{data:t})})},r.handleRequest=function(){var e=Object(y.a)(x.a.mark((function e(t){var s,n,a,c,i,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r.setState({isLoading:!0}),!r.state.request.data){e.next=13;break}e.prev=3,s=JSON.parse(r.state.request.data),e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(3),n={message:"JSON data validation failed, please double check your JSON input. Quotes needed for both keys and values"},r.props.getRequest({result:n}),r.setState({isLoading:!1}),e.abrupt("return");case 13:if(a={url:r.state.request.url,method:r.state.request.method,data:s},c={request:a,result:{}},r.isValidUrl(a.url)){e.next=23;break}return i={message:"Url validation failed, please double check your url input. Full url requested, like http(s)://xxx.xxx "},c=Object(g.a)(Object(g.a)({},c),{},{result:i}),r.props.getRequest(c),r.setState({isLoading:!1}),e.abrupt("return");case 23:return e.prev=23,e.next=26,v()(a);case 26:o=e.sent,c={request:a,result:o},r.props.getRequest(c),r.setState({isLoading:!1}),e.next=37;break;case 32:e.prev=32,e.t1=e.catch(23),c=Object(g.a)(Object(g.a)({},c),{},{result:e.t1}),r.props.getRequest(c),r.setState({isLoading:!1});case 37:case"end":return e.stop()}}),e,null,[[3,7],[23,32]])})));return function(t){return e.apply(this,arguments)}}(),r.isValidUrl=function(e){try{new URL(e)}catch(t){return!1}return!0},r.MethodButton=function(e){var t="".concat(e,"Button");return Object(n.jsx)("span",{id:t,className:"method ".concat(r.state.request.method===e),onClick:function(){return r.handleChangeMethod(e)},children:e.toUpperCase()})},r.JsonArea=function(e){return Object(n.jsx)("textarea",{id:"jsonBody",name:"data",spellCheck:"false",placeholder:"Please use strignified JSON data, text area disabled for GET and DELETE methods",disabled:"get"===e||"delete"===e,onChange:r.handleChangeData,rows:"3",cols:"90"})},r.state={request:{url:"",method:"get",data:""},isLoading:!1},r}return Object(u.a)(s,[{key:"render",value:function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("form",{id:"api",onSubmit:this.handleRequest,children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{htmlFor:"url",children:"URL:"}),Object(n.jsx)("input",{id:"urlInput",type:"text",name:"url",placeholder:"http://api.url.here",onChange:this.handleChangeUrl}),Object(n.jsx)("button",{type:"submit",disabled:!this.state.request.url,children:"GO!"})]}),Object(n.jsxs)("div",{className:"methods",children:[this.MethodButton("get"),this.MethodButton("post"),this.MethodButton("put"),this.MethodButton("delete"),this.JsonArea(this.state.request.method)]})]}),Object(n.jsx)(C,{condition:this.state.isLoading,children:Object(n.jsx)(N,{children:Object(n.jsx)("div",{id:"isLoading",children:Object(n.jsx)(S.a,{type:"bars",color:"grey",width:150})})})})]})}}]),s}(a.a.Component),L=(s(70),s(22)),R=s.n(L),B=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){return Object(o.a)(this,s),t.call(this,e)}return Object(u.a)(s,[{key:"render",value:function(){return Object(n.jsxs)("section",{className:"results",children:[Object(n.jsx)("h2",{children:"Headers:"}),Object(n.jsx)(R.a,{src:this.props.result.headers,name:"Headers"}),Object(n.jsx)("h2",{children:"Results:"}),Object(n.jsx)(R.a,{src:this.props.result.data,name:"data"})]})}}]),s}(a.a.Component),E=(s(71),function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(o.a)(this,s),(r=t.call(this,e)).handleHistoryRequest=function(e){"home"!==r.state.page?"history"!==r.state.page||r.historyPageList(e):r.homePageList(e)},r.historyPageList=function(e){r.props.getHistory(e)},r.homePageList=function(e){var t="".concat(e.method,"Button");document.getElementById(t).click();var s=document.getElementById("urlInput"),n=new Event("input",{bubbles:!0});r.setNativeValue(s,e.url),s.dispatchEvent(n),e.data&&(document.getElementById("jsonBody").value=JSON.stringify(e.data))},r.renderQueryHistory=function(){var e=r.props.history;console.log("history from history comp: ",e);var t=e.map((function(e,t){return Object(n.jsxs)("li",{children:[Object(n.jsx)("span",{className:"method ".concat(e.method),children:e.method}),Object(n.jsx)("button",{className:"url",onClick:function(){return r.handleHistoryRequest(e)},children:e.url})]},t)}));return Object(n.jsx)("ul",{id:"history",children:t})},r.state={page:"",result:null},r}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.setState({page:this.props.page})}},{key:"setNativeValue",value:function(e,t){var s=Object.getOwnPropertyDescriptor(e,"value").set,n=Object.getPrototypeOf(e),r=Object.getOwnPropertyDescriptor(n,"value").set;s&&s!==r?r.call(e,t):s.call(e,t)}},{key:"render",value:function(){return Object(n.jsxs)("aside",{className:"history",children:[Object(n.jsx)("h2",{children:"History"}),this.renderQueryHistory()]})}}]),s}(a.a.Component)),J=s(18).When,w=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).getRequest=function(e){var t={headers:e.result.headers||{error:"no headers found"},data:e.result.data||{error:e.result.message||"Unknown Error"}};n.state.history.some((function(t){return t.method===e.request.method&&t.url===e.request.url}))||n.setState({history:Object(p.a)(n.state.history.concat(e.request))}),n.setState({result:t}),200===e.result.status&&n.saveSucessfulRequestHistory(e)},n.saveSucessfulRequestHistory=function(e){sessionStorage.setItem(JSON.stringify(e.request),JSON.stringify(e.result))},n.state={history:[]},n}return Object(u.a)(s,[{key:"render",value:function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(H,{getRequest:this.getRequest}),Object(n.jsx)("main",{children:Object(n.jsxs)(J,{condition:this.state.result,children:[Object(n.jsx)(E,{history:this.state.history,page:"home"}),Object(n.jsx)(B,{result:this.state.result})]})})]})}}]),s}(a.a.Component),I=s(18),F=I.If,P=I.Then,M=I.Else,D=I.When,T=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).getHistory=function(e){var t=JSON.stringify(e),s=sessionStorage.getItem(t),r=JSON.parse(s);n.setState({result:r})},n.state={history:[]},n}return Object(u.a)(s,[{key:"componentDidMount",value:function(){console.log("history array:",Object.keys(sessionStorage));var e=[];Object.keys(sessionStorage).forEach((function(t){var s=JSON.parse(t);console.log("reqObj is ",s),e.push(s)})),this.setState({history:e})}},{key:"render",value:function(){return Object(n.jsx)("main",{children:Object(n.jsxs)(F,{condition:this.state.history.length>0,children:[Object(n.jsxs)(P,{children:[Object(n.jsx)(E,{history:this.state.history,page:"history",getHistory:this.getHistory}),Object(n.jsx)(D,{condition:this.state.result,children:Object(n.jsx)(B,{result:this.state.result})})]}),Object(n.jsx)(M,{children:Object(n.jsx)("h2",{children:"You have no request history in this session."})})]})})}}]),s}(a.a.Component),U=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"render",value:function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{children:"How to use this app"}),Object(n.jsx)("p",{children:"Please figure it out yourself. Thank you."})]})}}]),s}(a.a.Component);function V(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(j,{}),Object(n.jsxs)(O.c,{children:[Object(n.jsx)(O.a,{exact:!0,path:"/",component:w}),Object(n.jsx)(O.a,{exact:!0,path:"/history",component:T}),Object(n.jsx)(O.a,{exact:!0,path:"/help",component:U}),Object(n.jsx)(O.a,{children:Object(n.jsx)("h2",{children:"The route does not exsit"})})]}),Object(n.jsx)(b,{})]})}var Q=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,73)).then((function(t){var s=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;s(e),n(e),r(e),a(e),c(e)}))};i.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(d.a,{children:Object(n.jsx)(V,{})})}),document.getElementById("root")),Q()}},[[72,1,2]]]);
//# sourceMappingURL=main.cdb2df8b.chunk.js.map